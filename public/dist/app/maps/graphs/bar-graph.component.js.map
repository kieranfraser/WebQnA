{"version":3,"sources":["graphs/bar-graph.component.ts"],"names":[],"mappings":"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","file":"graphs/bar-graph.component.js","sourcesContent":["/**\r\n * Created by kfraser on 29/02/2016.\r\n */\r\nimport {Component, EventEmitter} from 'angular2/core';\r\nimport {CORE_DIRECTIVES, FORM_DIRECTIVES, NgClass} from 'angular2/common';\r\nimport {CHART_DIRECTIVES} from 'ng2-charts';\r\nimport {AnswerQuestionComponent} from \"../answer-component\";\r\nimport {forwardRef} from \"angular2/core\";\r\nimport {Inject} from \"angular2/core\";\r\nimport {HTTPService} from \"../services/http-service\";\r\nimport {Question} from \"../models/question\";\r\nimport {Answer} from \"../models/answer\";\r\nimport {OnInit} from \"angular2/core\";\r\nimport {OnChanges} from \"angular2/core\";\r\nimport {AfterViewChecked} from \"angular2/core\";\r\n\r\n\r\ndeclare var io: any;\r\n\r\n@Component({\r\n    selector: 'bar-graph',\r\n    templateUrl: '../views/graphs/bar_graph.html',\r\n    inputs: ['selectedQuestion'],\r\n    directives: [CHART_DIRECTIVES, NgClass, CORE_DIRECTIVES, FORM_DIRECTIVES]\r\n})\r\n\r\n/**\r\n * This is a default component - intentionally empty (including the\r\n * html) as it's needed when a child must have a terminal state.\r\n */\r\nexport class BarGraphComponent implements OnInit, OnChanges{\r\n\r\n\r\n    socket = null;\r\n    selectedQuestion: Question;\r\n    constructor(@Inject(forwardRef(() => AnswerQuestionComponent))private _parent: AnswerQuestionComponent,\r\n                private httpService: HTTPService) {\r\n        this.selectedQuestion = _parent.question;\r\n        this.barChartLabels = [];\r\n        this.getChoiceData();\r\n        this.socket = io('/');\r\n        this.socket.on('answer', function(){\r\n            console.log('Message from server: graph to be updated!!');\r\n            this.getChoiceData();\r\n        }.bind(this));\r\n    }\r\n\r\n    ngOnInit(){\r\n        this.barChartLabels = this.selectedQuestion.choices;\r\n        this.getChoiceData();\r\n    }\r\n\r\n    ngOnChanges(){\r\n        this.barChartLabels = this.selectedQuestion.choices;\r\n        this.getChoiceData();\r\n    }\r\n\r\n    // events\r\n    chartClicked(e:any) {\r\n        console.log(e);\r\n    }\r\n\r\n    chartHovered(e:any) {\r\n        console.log(e);\r\n    }\r\n\r\n    private barChartOptions = {\r\n        scaleShowVerticalLines: false,\r\n        responsive: true,\r\n        multiTooltipTemplate: '<%if (datasetLabel){%><%=datasetLabel %>: <%}%><%= value %>'\r\n    };\r\n    private barChartLabels = [];\r\n    private barChartSeries = ['Selected'];\r\n    public barChartType = 'Bar';\r\n    private barChartLegend:boolean = false;\r\n\r\n    private barChartData = [];\r\n\r\n    getChoiceData(){\r\n        var choiceOne = 0;\r\n        var choiceTwo = 0;\r\n        var choiceThree = 0;\r\n        var choiceFour = 0;\r\n\r\n        var answers: Answer[] = this.selectedQuestion.answers;\r\n\r\n        for(var answer of answers){\r\n            if(answer.answer === this.selectedQuestion.choices[0]){\r\n                choiceOne = choiceOne + 1;\r\n            }\r\n            if(answer.answer === this.selectedQuestion.choices[1]){\r\n                choiceTwo = choiceTwo + 1;\r\n            }\r\n            if(answer.answer === this.selectedQuestion.choices[2]){\r\n                choiceThree = choiceThree + 1;\r\n            }\r\n            if(answer.answer === this.selectedQuestion.choices[3]){\r\n                choiceFour = choiceFour + 1;\r\n            }\r\n        }\r\n        var choiceData = [choiceOne, choiceTwo, choiceThree, choiceFour];\r\n        this.barChartData = [choiceData];\r\n    }\r\n}"],"sourceRoot":"/source/"}
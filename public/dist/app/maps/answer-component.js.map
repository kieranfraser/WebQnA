{"version":3,"sources":["answer-component.ts"],"names":[],"mappings":"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","file":"answer-component.js","sourcesContent":["/**\r\n * Created by kfraser on 29/02/2016.\r\n */\r\nimport {Component, Inject, forwardRef} from 'angular2/core';\r\nimport {QuestionFeedComponent} from \"./question-feed.component\";\r\nimport {Question} from \"./models/question\";\r\nimport {Collapse} from \"ng2-bootstrap/ng2-bootstrap\";\r\nimport {BarGraphComponent} from \"./graphs/bar-graph.component\";\r\nimport {AnswerInputFormComponent} from \"./answer-form.component\";\r\nimport {HTTPService} from \"./services/http-service\";\r\nimport {Answer} from \"./models/answer\";\r\n\r\ndeclare var io: any;\r\n\r\n@Component({\r\n    selector: 'answer-question',\r\n    templateUrl: 'views/answer_question.html',\r\n    inputs: ['question'],\r\n    directives: [Collapse, BarGraphComponent, AnswerInputFormComponent],\r\n    providers: [HTTPService]\r\n})\r\n\r\n/**\r\n * This component is a modal that appears when the user clicks on a question in the\r\n * dashboard question feed. Includes an input form for answering questions.\r\n */\r\nexport class AnswerQuestionComponent{\r\n\r\n    socket = null;\r\n\r\n    public isCollapsedAnswer:boolean = true;\r\n    public isCollapsedStats:boolean = true;\r\n\r\n    question = new Question(\"\",\"\",\"\",[],[],\"\",\"\",\"\",\"\",\"\",\"\");\r\n    /**\r\n     * 1. Get the question that was clicked.\r\n     * 2. Create wells for each answer in the question.answer array.\r\n     * 3. Create an input field for adding an answer.\r\n     * 4. On submit, add the the answer to the question.answer array and update the question.\r\n     */\r\n    constructor(@Inject(forwardRef(() => QuestionFeedComponent))private _parent: QuestionFeedComponent,\r\n                private httpService: HTTPService){\r\n        this.socket = io('/');\r\n        this.socket.on('answer', function(){\r\n            console.log('Message from server: answer feed to be updated!!');\r\n            this.getUpdatedSelectedQuestion();\r\n        }.bind(this));\r\n    }\r\n\r\n    updateQuestions(){\r\n        this._parent.updateQuestions();\r\n    }\r\n\r\n    getUpdatedSelectedQuestion(){\r\n        var updatedQuestion;\r\n        var json = JSON.stringify(this.question);\r\n        this.httpService.getSelectedQuestion(json).subscribe(\r\n            data => updatedQuestion = JSON.parse(JSON.stringify(data)),\r\n            error => alert(error),\r\n            () => this.setQuestion(updatedQuestion)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * ToDo: This could be cleaned up to be more efficient.\r\n     * @param updatedQuestion\r\n     */\r\n    setQuestion(updatedQuestion){\r\n        var questionArray = [];\r\n        for(var item of updatedQuestion){\r\n            console.log((JSON.parse(JSON.stringify(item)).classid));\r\n            var question = new Question(\r\n                (JSON.parse(JSON.stringify(item)).classid),\r\n                (JSON.parse(JSON.stringify(item)).question),\r\n                (JSON.parse(JSON.stringify(item)).summary),\r\n                (JSON.parse(JSON.stringify(item)).choices),\r\n                (JSON.parse(JSON.stringify(item)).answers),\r\n                (JSON.parse(JSON.stringify(item)).userid),\r\n                (JSON.parse(JSON.stringify(item)).date),\r\n                (JSON.parse(JSON.stringify(item)).type),\r\n                (JSON.parse(JSON.stringify(item)).anonymous),\r\n                (JSON.parse(JSON.stringify(item)).username),\r\n                (JSON.parse(JSON.stringify(item)).picture));\r\n            this.question = question;\r\n        }\r\n\r\n        //this.question.answers = answers;answers;\r\n        console.log(this.question);\r\n    }\r\n}"],"sourceRoot":"/source/"}
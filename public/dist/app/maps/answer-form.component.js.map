{"version":3,"sources":["answer-form.component.ts"],"names":[],"mappings":"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","file":"answer-form.component.js","sourcesContent":["/**\r\n * Created by kfraser on 01/03/2016.\r\n */\r\nimport {Component, Inject, forwardRef} from 'angular2/core';\r\nimport {AnswerQuestionComponent} from \"./answer-component\";\r\nimport {Answer} from \"./models/answer\";\r\nimport {Question} from \"./models/question\";\r\nimport {HTTPService} from \"./services/http-service\";\r\nimport { CORE_DIRECTIVES, FORM_DIRECTIVES } from 'angular2/common';\r\nimport {BUTTON_DIRECTIVES} from \"ng2-bootstrap/ng2-bootstrap\"\r\n\r\ndeclare var io: any;\r\n\r\n@Component({\r\n    selector: 'answer-input-form',\r\n    templateUrl: 'views/answer_input_form.html',\r\n    inputs: ['selectedQuestion'],\r\n    providers: [HTTPService],\r\n    directives: [ BUTTON_DIRECTIVES, CORE_DIRECTIVES, FORM_DIRECTIVES ]\r\n})\r\n\r\n/**\r\n * This is a default component - intentionally empty (including the\r\n * html) as it's needed when a child must have a terminal state.\r\n */\r\nexport class AnswerInputFormComponent{\r\n\r\n    socket = null;\r\n\r\n    selectedQuestion: Question;\r\n    answerModel = new Answer(\r\n        \"\",\r\n        \"\",\r\n        \"\",\r\n        \"\",\r\n        JSON.parse(localStorage.getItem('profile')).name,\r\n        JSON.parse(localStorage.getItem('profile')).picture\r\n    );\r\n    public now:Date = new Date();\r\n    submitted: boolean = false;\r\n\r\n    constructor(@Inject(forwardRef(()=>AnswerQuestionComponent)) private _parent: AnswerQuestionComponent,\r\n                private httpService: HTTPService){\r\n        this.selectedQuestion = _parent.question;\r\n        this.socket = io('/');\r\n    }\r\n\r\n    onSubmit(){\r\n        this.submitted = true;\r\n\r\n        this.now = new Date();\r\n        this.answerModel.user = JSON.parse(localStorage.getItem('profile')).user_id;\r\n        this.answerModel.date = this.now.toString();\r\n\r\n\r\n        this.selectedQuestion.answers.push(this.answerModel);\r\n        console.log('this is the question');\r\n        console.log(this.selectedQuestion);\r\n        if(this.answerModel.answer != \"\"){\r\n            var json = JSON.stringify(this.selectedQuestion);\r\n            this.httpService.updateQuestion(json).subscribe(\r\n                data => console.log(JSON.stringify(data)),\r\n                error => alert(error),\r\n                () => this.sendUpdate()\r\n            );\r\n\r\n            this.answerModel = new Answer(\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                JSON.parse(localStorage.getItem('profile')).name,\r\n                JSON.parse(localStorage.getItem('profile')).picture\r\n            );\r\n\r\n            this._parent.isCollapsedAnswer = true;\r\n        }\r\n    }\r\n\r\n    sendUpdate(){\r\n        console.log(\"post answer success\")\r\n        this.socket.emit('update', 'answer');\r\n    }\r\n\r\n}"],"sourceRoot":"/source/"}